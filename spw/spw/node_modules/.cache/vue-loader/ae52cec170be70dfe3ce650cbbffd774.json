{"remainingRequest":"c:\\xampp\\htdocs\\zt\\myProject\\project-move\\phone_project\\spw\\spw\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!c:\\xampp\\htdocs\\zt\\myProject\\project-move\\phone_project\\spw\\spw\\src\\components\\sub\\comment.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"c:\\xampp\\htdocs\\zt\\myProject\\project-move\\phone_project\\spw\\spw\\src\\components\\sub\\comment.vue","mtime":1541063964000},{"path":"c:\\xampp\\htdocs\\zt\\myProject\\project-move\\phone_project\\spw\\spw\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"c:\\xampp\\htdocs\\zt\\myProject\\project-move\\phone_project\\spw\\spw\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"c:\\xampp\\htdocs\\zt\\myProject\\project-move\\phone_project\\spw\\spw\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"c:\\xampp\\htdocs\\zt\\myProject\\project-move\\phone_project\\spw\\spw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"c:\\xampp\\htdocs\\zt\\myProject\\project-move\\phone_project\\spw\\spw\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.app-comment h1{\n    font-size:18px;\n}\n.app-comment textarea{\n    font-size:14px;\n    height:85px;\n    margin:0;\n}\n.app-comment .cmt-list{\n    margin:5px 0;\n}\n.app-comment .cmt-list .cmt-info{\n    line-height:30px;\n    background:#ccc;\n}\n.app-comment .cmt-list .cmt-body{\n    line-height:35px;\n    text-indent:2em;\n}\n",{"version":3,"sources":["comment.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"comment.vue","sourceRoot":"src\\components\\sub","sourcesContent":["<template>\r\n    <div class=\"app-comment\">\r\n        <h1>评论子组件</h1>\r\n        <hr>\r\n        <!--发表评论的区域-->\r\n        <textarea placeholder=\"请吐槽最多120个字\" maxlength=\"120\" v-model=\"msg\" @keyup.13=\"postComment\"></textarea>\r\n        <mt-button size=\"large\" @click=\"postComment\">发表评论</mt-button>\r\n        <!--显示评论的区域-->\r\n        <div class=\"cmt-list\">\r\n            <div class=\"cmt-item\" v-for=\"(item,i) in list\" :key=\"item.id\">\r\n                <div class=\"cmt-info\">第{{i+1}}楼 用户:{{item.user_name}} 发表时间：{{item.ctime | dateFilter}}</div>\r\n                <div class=\"cmt-body\">{{item.content}}</div>\r\n            </div>\r\n        </div>\r\n        <mt-button size=\"large\" @click=\"getMore\">加载更多</mt-button>\r\n    </div>\r\n</template>\r\n<script>\r\n    import {Toast} from 'mint-ui'\r\n    export default{\r\n        data(){return{\r\n            msg:\"\",\r\n            pageIndex:0,   \r\n            pageSize:5,\r\n            list:[]\r\n        }},\r\n        props:[\"id\"],//接收父组件的参数\r\n        created(){\r\n            this.getMore();\r\n        },\r\n        methods:{\r\n            getMore(){\r\n                this.pageIndex++;\r\n                //判断是否有下一页的数据\r\n                //this.hasMore = this.pageIndex <= this.pageCount;\r\n                //如果没有下一页数据，停止函数执行\r\n                //if(!this.hasMore){\r\n                //    return\r\n                //}\r\n                var url=\"getComment\";\r\n                url+=\"?nid=\"+this.id+\"&pno=\"+this.pageIndex+\"&pageSize=\"+this.pageSize;\r\n                this.$http.get(url).then(result=>{\r\n                    // console.log(result);\r\n                    // this.list = result.body.data;\r\n                    //将原有的翻页，改为一页一页的累加\r\n                    var rows = this.list.concat(result.body.data);\r\n                    this.list = rows;\r\n                    //保存总页数\r\n                    this.pageCount = result.body.pageCount\r\n                })\r\n            },\r\n            postComment(){\r\n                var nid=this.id;\r\n                var pmsg=this.msg;\r\n                //3.判断评论内容不能为空，提示框\r\n                if(pmsg.trim().length==0){\r\n                   Toast(\"评论内容不能为空\")\r\n                   return;\r\n                }\r\n                //4.发送post请求\r\n                var url=\"http://127.0.0.1:3000/postcomment\";\r\n                this.$http.post(url,{nid:nid,msg:pmsg}).then(result=>{\r\n                    console.log(result);\r\n                    //5.获取服务器程序返回\r\n                    //6.提示用户“评论成功”\r\n                    Toast(\"发表成功\");\r\n                    this.pageIndex = 0;\r\n                    this.list = [];\r\n                    this.getMore();\r\n                    this.msg=\"\";\r\n                })\r\n            }\r\n        }\r\n    }\r\n</script>\r\n<style>\r\n    .app-comment h1{\r\n        font-size:18px;\r\n    }\r\n    .app-comment textarea{\r\n        font-size:14px;\r\n        height:85px;\r\n        margin:0;\r\n    }\r\n    .app-comment .cmt-list{\r\n        margin:5px 0;\r\n    }\r\n    .app-comment .cmt-list .cmt-info{\r\n        line-height:30px;\r\n        background:#ccc;\r\n    }\r\n    .app-comment .cmt-list .cmt-body{\r\n        line-height:35px;\r\n        text-indent:2em;\r\n    }\r\n</style>"]}]}